#!/bin/sh

# if no arguments are provided, return usage function
if [ $# -eq 0 ]; then
    echo "Please enter a webaddress and a name (Spaces are supported for names)"
    exit 1
fi

source ./units.sh
source ./nativefy.conf

webaddress=$1
webapp_display_name=$2

[ $(is_webpage_up $webaddress) == "false" ] && exit

# determine electron version to build with, sourced from nativefy.conf
get_build_electron_version $electron_version
echo "Packaging with electron v$build_el_version"

to_lower_and_snake_case $webapp_display_name


# sourced from nativefy.conf
cd $webapps_folder

# execute nativefier command
nativefier -u $user_agent_str -e $build_el_version -n "$webapp_name" $webaddress

create_desktop_file $webapp_display_name


# u11 copy .desktop file to desired location
#cp $desktop_file ~/.local/share/applications/$webapp_name.desktop
